branches:
  only:
  - master
services:
- docker
before_install:
- docker pull osones/revealjs-builder:stable
- docker pull osones/wkhtmltopdf:stable
script:
- for dir in styles/* ; do if [ -d "$dir" ] ; then aws s3 cp "$dir".css s3://AWS_S3_BUCKET/formations/revealjs/css/theme/
  && aws s3 cp "$(basename $dir)" s3://$AWS_S3_BUCKET/formations/revealjs/css/theme/"$(basename
  $dir)" --recursive ; fi ; done
- "/bin/bash -x build.sh -l fr"
- "/bin/bash -x build.sh -l en"
deploy:
- provider: s3
  skip_cleanup: true
  access_key_id: "$AWS_ACCESS_KEY_ID"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY"
  bucket: "$AWS_S3_BUCKET"
  region: "$AWS_DEFAULT_REGION"
  acl: public_read
  local_dir: output-html
  upload-dir: formations
- provider: s3
  skip_cleanup: true
  access_key_id: "$AWS_ACCESS_KEY_ID"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY"
  bucket: "$AWS_S3_BUCKET"
  region: "$AWS_DEFAULT_REGION"
  acl: public_read
  local_dir: output-pdf
  upload-dir: formations/pdf
notifications:
  slack:
    rooms:
      - "KBoqIyJIwQw82c7anXmINvlsxT1Vv/V8oC5odRxUxvqDojDZdS6W/KFbwEwJ3SW4fjYctSeH5dQNzZG4m3rXKiBSX/TY1AQ6pnnzDRT+qF7pwc76ACkzIT52FAvmJpQaEPdXNXB6OO9VlOSpv2rkKF3ACX6pugoWp2O8P8T4YKA0RlBwK8070c/2EDopyqBmks+UeZViNaKLQueyxFFSrcXxdDcSI/yi3an+HjdTeDBBOH6JvX8sL/rrodz5C9SE8wLlAiH68sCci2hJ3fEwlU9vTH6q/LhJVAysDcmyGaa0iB2EM/1gIHAmuIdAGgLq/KvZr/dvnxU+61aWUnWu2J8k1EQw86ziyT3EBgEzj3oHBiOWwDjHmQsGZDXj1G5COy6DDFawTueGJzX7HQ9HKIOdl1uePeJR9xLscFlKi8y+1mTozzZTZ2bn8MeaYe7t5RgsYo2WOBb3ULuqPaCyYeISmZy2tRVYEtSGXLDtTSBK38u/XIqaJ3NCzN9qQhJ+kGnRyLaPJYDvyIOCwHKDK5cNLoOBmY8OHM3SJsVqho6jaOLEUhsJFUmWa/tryNQlpJkTdq6s2z3Ftv9B631uvDW0EX4XFrBDnJuW7bxq12pC///KG5DxbqKRGaEiSdQ3nTwC0vUJ23SSEcYooi51jtxnmYYyZoESm9puI6GqKew="
     - "cKYVQm69Z5llE8659EzAlpC8WwB7JJMvLZXXLbLV+yzIUu3SpHiVqIJvcqeOQ2iiHdDsojyHRjqkGqLjuvUPkYurtB3kzyLqmt9e/Yjwn4Khplw9q8GrvtRpaxeYyaREvIbx/AfAKhReRIe/e/GMZ7PZMEnZBR/26XKtvV58l7FjGNIxpXJ7RpbI5PxwB3VAmJBwOtnX43B2BPwp8lazyCbR9Zdu7KC6gzvRvPEVuIq0NvtcPLsFrpnwbr7if8eXx2KQHaAMvc86/sZKsmiQkrJKiEFwTWcsEY9jcofML4yFxr9jqLlUN8LJ3xr/nULXxlhY790R8E/T+Y6QKIldc5JACShd/m+tHar9pnuyO7WcXmxHwNSGoPp2qw9WK/S1H7qP7ciUt298agHHJjBuXcJgggwrAbpxU6Q3Rqiz1XT+Xjge3MOIINAcvoBoxIXKo/fUgfYP63QKWhm0ii3k6B0RvOliB4NRfaJSiOPhz9oEsKaCmu8nKTXfNTjuvbY34R+N8Nc611yPc2H1Us2cD0uoTEsqfWDaJPqFmZ2iEUj4V7eL324LKe9WUOgwOzWTK4Lsap7gfEKSsDVh1kR5Afts0QP5KDRPhzluKgzvMoRh8zbn5Kcuxj6tM72gCrEQVC/PI1lxl6PjyXk8+tRNc+0cFCKIbo93UJXedo/qaYI="
